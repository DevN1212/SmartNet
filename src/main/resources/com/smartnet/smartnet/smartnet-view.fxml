<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox alignment="TOP_CENTER" spacing="20.0" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.smartnet.smartnet.SmartNetController" stylesheets="@styles.css">
  <padding>
    <Insets top="20.0" right="20.0" bottom="20.0" left="20.0"/>
  </padding>

  <Label text="SmartNet CIDR Scanner" style="-fx-font-size: 22px; -fx-font-weight: bold;"/>

  <HBox spacing="10.0" alignment="CENTER">
    <Label text="IPAddress:"/>
    <TextField fx:id="IPAddress_in" promptText="e.g., 192.168.1.0" prefWidth="250"/>
    <Label text="Subnet:"/>
    <TextField fx:id="cidrRange" promptText="(optional)" prefWidth="80"/>
    <Button fx:id="scan" text="Scan" onAction="#startScan"/>
  </HBox>

  <Label text="Port Scan Options:" style="-fx-font-weight: bold;"/>

  <HBox spacing="15" alignment="CENTER">
    <fx:define>
      <ToggleGroup fx:id="portOptionGroup"/>
    </fx:define>
    <RadioButton fx:id="popularPortsRadio" text="Popular Ports" toggleGroup="$portOptionGroup" selected="true"/>
    <RadioButton fx:id="top1000PortsRadio" text="Top 1000 Ports" toggleGroup="$portOptionGroup"/>
    <RadioButton fx:id="customPortsRadio" text="Custom Ports" toggleGroup="$portOptionGroup"/>
    <TextField fx:id="customPortsField" promptText="e.g. 21,22,80,443" prefWidth="200" disable="true"/>
  </HBox>

  <HBox spacing="15" alignment="CENTER_LEFT">
    <CheckBox fx:id="osScanCheckBox" text="Scan OS" selected="false"/>
  </HBox>

  <!-- SplitPane: Table (top) + Details (bottom) -->
  <SplitPane orientation="VERTICAL" dividerPositions="0.65" prefHeight="500" prefWidth="800">

    <!-- Results Table -->
    <StackPane>
      <TableView fx:id="resultTable" prefHeight="400" prefWidth="600">
        <columns>
          <TableColumn fx:id="ipColumn" text="IP Address" prefWidth="150"/>
          <TableColumn fx:id="statusColumn" text="Status" prefWidth="60"/>
          <TableColumn fx:id="osColumn" text="Possible OS"/>
        </columns>
      </TableView>

      <VBox fx:id="loadingOverlay" alignment="CENTER" spacing="10" visible="false">
        <ProgressIndicator fx:id="progressIndicator" prefWidth="50" prefHeight="50"/>
        <Label text="Scanning..." style="-fx-font-size: 14px; -fx-text-fill: gray;"/>
      </VBox>
    </StackPane>

    <!-- Details Panel -->
    <AnchorPane>
      <VBox spacing="8" style="-fx-padding:10;">
        <Label text="Host Details" style="-fx-font-size:14; -fx-font-weight:bold;"/>
        <GridPane hgap="10" vgap="5">
          <columnConstraints>
            <ColumnConstraints halignment="RIGHT" minWidth="100"/>
            <ColumnConstraints halignment="LEFT" minWidth="200"/>
          </columnConstraints>

          <Label text="IP Address:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
          <Label fx:id="detailIp" text="-" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

          <Label text="MAC Address:" fx:id="macLabel" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
          <Label fx:id="detailMac" text="-" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

          <Label text="Hostname:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
          <Label fx:id="detailHost" text="-" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

          <Label text="OS Fingerprint:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
          <Label fx:id="detailOs" text="-" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

          <Label text="Open Ports:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
          <Label fx:id="detailPorts" text="-" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
        </GridPane>
      </VBox>
    </AnchorPane>

  </SplitPane>

  <Button fx:id="exportCSV" text="Export CSV" onAction="#onExportCSV" disable="true"/>
</VBox>
